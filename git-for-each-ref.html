<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.2.5" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
}

strong {
  font-weight: bold;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock {
  margin-right: 0%;
}
div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock > div.content {
  padding-left: 2.0em;
}

div.attribution {
  text-align: right;
}
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.verseblock div.content {
  white-space: pre;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: italic;
}
dd > *:first-child {
  margin-top: 0;
}

ul, ol {
    list-style-position: outside;
}
div.olist2 ol {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hlist td {
  padding-bottom: 5px;
}
td.hlist1 {
  vertical-align: top;
  font-style: italic;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
include1::./stylesheets/xhtml11-manpage.css[]
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-content {
  padding-left: 2.0em;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }
</style>
<title>git-for-each-ref(1)</title>
</head>
<body>
<div id="header">
<h1>
git-for-each-ref(1) Manual Page
</h1>
<h2>NAME</h2>
<div class="sectionbody">
<p>git-for-each-ref -
   Output information on each ref
</p>
</div>
</div>
<h2>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<div class="content"><em>git for-each-ref</em> [--count=&lt;count&gt;] [--shell|--perl|--python|--tcl]
                   [--sort=&lt;key&gt;]* [--format=&lt;format&gt;] [&lt;pattern&gt;&#8230;]</div></div>
</div>
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="para"><p>Iterate over all refs that match <tt>&lt;pattern&gt;</tt> and show them
according to the given <tt>&lt;format&gt;</tt>, after sorting them according
to the given set of <tt>&lt;key&gt;</tt>.  If <tt>&lt;count&gt;</tt> is given, stop after
showing that many refs.  The interpolated values in <tt>&lt;format&gt;</tt>
can optionally be quoted as string literals in the specified
host language allowing their direct evaluation in that language.</p></div>
</div>
<h2 id="_options">OPTIONS</h2>
<div class="sectionbody">
<div class="vlist"><dl>
<dt>
&lt;count&gt;
</dt>
<dd>
<p>
        By default the command shows all refs that match
        <tt>&lt;pattern&gt;</tt>.  This option makes it stop after showing
        that many refs.
</p>
</dd>
<dt>
&lt;key&gt;
</dt>
<dd>
<p>
        A field name to sort on.  Prefix <tt>-</tt> to sort in
        descending order of the value.  When unspecified,
        <tt>refname</tt> is used.  You may use the --sort=&lt;key&gt; option
        multiple times, in which case the last key becomes the primary
        key.
</p>
</dd>
<dt>
&lt;format&gt;
</dt>
<dd>
<p>
        A string that interpolates <tt>%(fieldname)</tt> from the
        object pointed at by a ref being shown.  If <tt>fieldname</tt>
        is prefixed with an asterisk (<tt>*</tt>) and the ref points
        at a tag object, the value for the field in the object
        tag refers is used.  When unspecified, defaults to
        <tt>%(objectname) SPC %(objecttype) TAB %(refname)</tt>.
        It also interpolates <tt>%%</tt> to <tt>%</tt>, and <tt>%xx</tt> where <tt>xx</tt>
        are hex digits interpolates to character with hex code
        <tt>xx</tt>; for example <tt>%00</tt> interpolates to <tt>\0</tt> (NUL),
        <tt>%09</tt> to <tt>\t</tt> (TAB) and <tt>%0a</tt> to <tt>\n</tt> (LF).
</p>
</dd>
<dt>
&lt;pattern&gt;&#8230;
</dt>
<dd>
<p>
        If one or more patterns are given, only refs are shown that
        match against at least one pattern, either using fnmatch(3) or
        literally, in the latter case matching completely or from the
        beginning up to a slash.
</p>
</dd>
<dt>
--shell
</dt>
<dt>
--perl
</dt>
<dt>
--python
</dt>
<dt>
--tcl
</dt>
<dd>
<p>
        If given, strings that substitute <tt>%(fieldname)</tt>
        placeholders are quoted as string literals suitable for
        the specified host language.  This is meant to produce
        a scriptlet that can directly be `eval`ed.
</p>
</dd>
</dl></div>
</div>
<h2 id="_field_names">FIELD NAMES</h2>
<div class="sectionbody">
<div class="para"><p>Various values from structured fields in referenced objects can
be used to interpolate into the resulting output, or as sort
keys.</p></div>
<div class="para"><p>For all objects, the following names can be used:</p></div>
<div class="vlist"><dl>
<dt>
refname
</dt>
<dd>
<p>
        The name of the ref (the part after $GIT_DIR/).
        For a non-ambiguous short name of the ref append <tt>:short</tt>.
        The option core.warnAmbiguousRefs is used to select the strict
        abbreviation mode.
</p>
</dd>
<dt>
objecttype
</dt>
<dd>
<p>
        The type of the object (<tt>blob</tt>, <tt>tree</tt>, <tt>commit</tt>, <tt>tag</tt>).
</p>
</dd>
<dt>
objectsize
</dt>
<dd>
<p>
        The size of the object (the same as <em>git cat-file -s</em> reports).
</p>
</dd>
<dt>
objectname
</dt>
<dd>
<p>
        The object name (aka SHA-1).
        For a non-ambiguous abbreviation of the object name append <tt>:short</tt>.
</p>
</dd>
<dt>
upstream
</dt>
<dd>
<p>
        The name of a local ref which can be considered &#8220;upstream&#8221;
        from the displayed ref. Respects <tt>:short</tt> in the same way as
        <tt>refname</tt> above.
</p>
</dd>
</dl></div>
<div class="para"><p>In addition to the above, for commit and tag objects, the header
field names (<tt>tree</tt>, <tt>parent</tt>, <tt>object</tt>, <tt>type</tt>, and <tt>tag</tt>) can
be used to specify the value in the header field.</p></div>
<div class="para"><p>Fields that have name-email-date tuple as its value (<tt>author</tt>,
<tt>committer</tt>, and <tt>tagger</tt>) can be suffixed with <tt>name</tt>, <tt>email</tt>,
and <tt>date</tt> to extract the named component.</p></div>
<div class="para"><p>The first line of the message in a commit and tag object is
<tt>subject</tt>, the remaining lines are <tt>body</tt>.  The whole message
is <tt>contents</tt>.</p></div>
<div class="para"><p>For sorting purposes, fields with numeric values sort in numeric
order (<tt>objectsize</tt>, <tt>authordate</tt>, <tt>committerdate</tt>, <tt>taggerdate</tt>).
All other fields are used to sort in their byte-value order.</p></div>
<div class="para"><p>In any case, a field name that refers to a field inapplicable to
the object referred by the ref does not cause an error.  It
returns an empty string instead.</p></div>
<div class="para"><p>As a special case for the date-type fields, you may specify a format for
the date by adding one of <tt>:default</tt>, <tt>:relative</tt>, <tt>:short</tt>, <tt>:local</tt>,
<tt>:iso8601</tt> or <tt>:rfc2822</tt> to the end of the fieldname; e.g.
<tt>%(taggerdate:relative)</tt>.</p></div>
</div>
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="para"><p>An example directly producing formatted text.  Show the most recent
3 tagged commits::</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>#!/bin/sh

git for-each-ref --count=3 --sort='-*authordate' \
--format='From: %(*authorname) %(*authoremail)
Subject: %(*subject)
Date: %(*authordate)
Ref: %(*refname)

%(*body)
' 'refs/tags'</tt></pre>
</div></div>
<div class="para"><p>A simple example showing the use of shell eval on the output,
demonstrating the use of --shell.  List the prefixes of all heads::</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>#!/bin/sh

git for-each-ref --shell --format="ref=%(refname)" refs/heads | \
while read entry
do
        eval "$entry"
        echo `dirname $ref`
done</tt></pre>
</div></div>
<div class="para"><p>A bit more elaborate report on tags, demonstrating that the format
may be an entire script::</p></div>
<div class="listingblock">
<div class="content">
<pre><tt>#!/bin/sh

fmt='
        r=%(refname)
        t=%(*objecttype)
        T=${r#refs/tags/}

        o=%(*objectname)
        n=%(*authorname)
        e=%(*authoremail)
        s=%(*subject)
        d=%(*authordate)
        b=%(*body)

        kind=Tag
        if test "z$t" = z
        then
                # could be a lightweight tag
                t=%(objecttype)
                kind="Lightweight tag"
                o=%(objectname)
                n=%(authorname)
                e=%(authoremail)
                s=%(subject)
                d=%(authordate)
                b=%(body)
        fi
        echo "$kind $T points at a $t object $o"
        if test "z$t" = zcommit
        then
                echo "The commit was authored by $n $e
at $d, and titled

    $s

Its message reads as:
"
                echo "$b" | sed -e "s/^/    /"
                echo
        fi
'

eval=`git for-each-ref --shell --format="$fmt" \
        --sort='*objecttype' \
        --sort=-taggerdate \
        refs/tags`
eval "$eval"</tt></pre>
</div></div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2010-09-18 23:56:43 UTC
</div>
</div>
</body>
</html>
