<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.6.8" />
<title>How to maintain Git</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}


#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install();
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>How to maintain Git</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p>The maintainer&#8217;s git time is spent on three activities.</p></div>
<div class="ulist"><ul>
<li>
<p>
Communication (60%)
</p>
<div class="literalblock">
<div class="content">
<pre><code>Mailing list discussions on general design, fielding user
questions, diagnosing bug reports; reviewing, commenting on,
suggesting alternatives to, and rejecting patches.</code></pre>
</div></div>
</li>
<li>
<p>
Integration (30%)
</p>
<div class="literalblock">
<div class="content">
<pre><code>Applying new patches from the contributors while spotting and
correcting minor mistakes, shuffling the integration and
testing branches, pushing the results out, cutting the
releases, and making announcements.</code></pre>
</div></div>
</li>
<li>
<p>
Own development (10%)
</p>
<div class="literalblock">
<div class="content">
<pre><code>Scratching my own itch and sending proposed patch series out.</code></pre>
</div></div>
</li>
</ul></div>
<div class="paragraph"><p>The policy on Integration is informally mentioned in "A Note
from the maintainer" message, which is periodically posted to
this mailing list after each feature release is made.</p></div>
<div class="paragraph"><p>The policy.</p></div>
<div class="ulist"><ul>
<li>
<p>
Feature releases are numbered as vX.Y.Z and are meant to
   contain bugfixes and enhancements in any area, including
   functionality, performance and usability, without regression.
</p>
</li>
<li>
<p>
Maintenance releases are numbered as vX.Y.Z.W and are meant
   to contain only bugfixes for the corresponding vX.Y.Z feature
   release and earlier maintenance releases vX.Y.Z.V (V &lt; W).
</p>
</li>
<li>
<p>
<em>master</em> branch is used to prepare for the next feature
   release. In other words, at some point, the tip of <em>master</em>
   branch is tagged with vX.Y.Z.
</p>
</li>
<li>
<p>
<em>maint</em> branch is used to prepare for the next maintenance
   release.  After the feature release vX.Y.Z is made, the tip
   of <em>maint</em> branch is set to that release, and bugfixes will
   accumulate on the branch, and at some point, the tip of the
   branch is tagged with vX.Y.Z.1, vX.Y.Z.2, and so on.
</p>
</li>
<li>
<p>
<em>next</em> branch is used to publish changes (both enhancements
   and fixes) that (1) have worthwhile goal, (2) are in a fairly
   good shape suitable for everyday use, (3) but have not yet
   demonstrated to be regression free.  New changes are tested
   in <em>next</em> before merged to <em>master</em>.
</p>
</li>
<li>
<p>
<em>pu</em> branch is used to publish other proposed changes that do
   not yet pass the criteria set for <em>next</em>.
</p>
</li>
<li>
<p>
The tips of <em>master</em>, <em>maint</em> and <em>next</em> branches will always
   fast-forward, to allow people to build their own
   customization on top of them.
</p>
</li>
<li>
<p>
Usually <em>master</em> contains all of <em>maint</em>, <em>next</em> contains all
   of <em>master</em> and <em>pu</em> contains all of <em>next</em>.
</p>
</li>
<li>
<p>
The tip of <em>master</em> is meant to be more stable than any
   tagged releases, and the users are encouraged to follow it.
</p>
</li>
<li>
<p>
The <em>next</em> branch is where new action takes place, and the
   users are encouraged to test it so that regressions and bugs
   are found before new topics are merged to <em>master</em>.
</p>
</li>
</ul></div>
<div class="paragraph"><p>A typical git day for the maintainer implements the above policy
by doing the following:</p></div>
<div class="ulist"><ul>
<li>
<p>
Scan mailing list and #git channel log.  Respond with review
   comments, suggestions etc.  Kibitz.  Collect potentially
   usable patches from the mailing list.  Patches about a single
   topic go to one mailbox (I read my mail in Gnus, and type
   \C-o to save/append messages in files in mbox format).
</p>
</li>
<li>
<p>
Review the patches in the saved mailboxes.  Edit proposed log
   message for typofixes and clarifications, and add Acks
   collected from the list.  Edit patch to incorporate "Oops,
   that should have been like this" fixes from the discussion.
</p>
</li>
<li>
<p>
Classify the collected patches and handle <em>master</em> and
   <em>maint</em> updates:
</p>
</li>
<li>
<p>
Obviously correct fixes that pertain to the tip of <em>maint</em>
     are directly applied to <em>maint</em>.
</p>
</li>
<li>
<p>
Obviously correct fixes that pertain to the tip of <em>master</em>
     are directly applied to <em>master</em>.
</p>
<div class="literalblock">
<div class="content">
<pre><code>This step is done with "git am".</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout master    ;# or "git checkout maint"
$ git am -3 -s mailbox
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
Merge downwards (maint&#8594;master):
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout master
$ git merge maint
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
Review the last issue of "What&#8217;s cooking" message, review the
   topics scheduled for merging upwards (topic&#8594;master and
   topic&#8594;maint), and merge.
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout master    ;# or "git checkout maint"
$ git merge ai/topic     ;# or "git merge ai/maint-topic"
$ git log -p ORIG_HEAD.. ;# final review
$ git diff ORIG_HEAD..   ;# final review
$ make test              ;# final review
$ git branch -d ai/topic ;# or "git branch -d ai/maint-topic"</code></pre>
</div></div>
</li>
<li>
<p>
Merge downwards (maint&#8594;master) if needed:
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout master
$ git merge maint
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
Merge downwards (master&#8594;next) if needed:
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout next
$ git merge master
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
Handle the remaining patches:
</p>
</li>
<li>
<p>
Anything unobvious that is applicable to <em>master</em> (in other
     words, does not depend on anything that is still in <em>next</em>
     and not in <em>master</em>) is applied to a new topic branch that
     is forked from the tip of <em>master</em>.  This includes both
     enhancements and unobvious fixes to <em>master</em>.  A topic
     branch is named as ai/topic where "ai" is typically
     author&#8217;s initial and "topic" is a descriptive name of the
     topic (in other words, "what&#8217;s the series is about").
</p>
</li>
<li>
<p>
An unobvious fix meant for <em>maint</em> is applied to a new
     topic branch that is forked from the tip of <em>maint</em>.  The
     topic is named as ai/maint-topic.
</p>
</li>
<li>
<p>
Changes that pertain to an existing topic are applied to
     the branch, but:
</p>
</li>
<li>
<p>
obviously correct ones are applied first;
</p>
</li>
<li>
<p>
questionable ones are discarded or applied to near the tip;
</p>
</li>
<li>
<p>
Replacement patches to an existing topic are accepted only
     for commits not in <em>next</em>.
</p>
<div class="literalblock">
<div class="content">
<pre><code>The above except the "replacement" are all done with:</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>$ git am -3 -s mailbox</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>while patch replacement is often done by:</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>$ git format-patch ai/topic~$n..ai/topic ;# export existing</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>then replace some parts with the new patch, and reapplying:</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>$ git reset --hard ai/topic~$n
$ git am -3 -s 000*.txt</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>The full test suite is always run for 'maint' and 'master'
after patch application; for topic branches the tests are run
as time permits.</code></pre>
</div></div>
</li>
<li>
<p>
Update "What&#8217;s cooking" message to review the updates to
   existing topics, newly added topics and graduated topics.
</p>
<div class="literalblock">
<div class="content">
<pre><code>This step is helped with Meta/cook script (where Meta/ contains
a checkout of the 'todo' branch).</code></pre>
</div></div>
</li>
<li>
<p>
Merge topics to <em>next</em>.  For each branch whose tip is not
   merged to <em>next</em>, one of three things can happen:
</p>
</li>
<li>
<p>
The commits are all next-worthy; merge the topic to next:
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout next
$ git merge ai/topic     ;# or "git merge ai/maint-topic"
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
The new parts are of mixed quality, but earlier ones are
     next-worthy; merge the early parts to next:
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout next
$ git merge ai/topic~2   ;# the tip two are dubious
$ make test</code></pre>
</div></div>
</li>
<li>
<p>
Nothing is next-worthy; do not do anything.
</p>
</li>
<li>
<p>
[<strong> OBSOLETE </strong>] Optionally rebase topics that do not have any commit
   in next yet, when they can take advantage of low-level framework
   change that is merged to <em>master</em> already.
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git rebase master ai/topic</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>This step is helped with Meta/git-topic.perl script to
identify which topic is rebaseable.  There also is a
pre-rebase hook to make sure that topics that are already in
'next' are not rebased beyond the merged commit.</code></pre>
</div></div>
</li>
<li>
<p>
[<strong> OBSOLETE </strong>] Rebuild "pu" to merge the tips of topics not in <em>next</em>.
</p>
<div class="literalblock">
<div class="content">
<pre><code>$ git checkout pu
$ git reset --hard next
$ git merge ai/topic     ;# repeat for all remaining topics
$ make test</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>This step is helped with Meta/PU script</code></pre>
</div></div>
</li>
<li>
<p>
Push four integration branches to a private repository at
   k.org and run "make test" on all of them.
</p>
</li>
<li>
<p>
Push four integration branches to /pub/scm/git/git.git at
   k.org.  This triggers its post-update hook which:
</p>
<div class="literalblock">
<div class="content">
<pre><code>(1) runs "git pull" in $HOME/git-doc/ repository to pull
    'master' just pushed out;</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>(2) runs "make doc" in $HOME/git-doc/, install the generated
    documentation in staging areas, which are separate
    repositories that have html and man branches checked
    out.</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>(3) runs "git commit" in the staging areas, and run "git
    push" back to /pub/scm/git/git.git/ to update the html
    and man branches.</code></pre>
</div></div>
<div class="literalblock">
<div class="content">
<pre><code>(4) installs generated documentation to /pub/software/scm/git/docs/
    to be viewed from http://www.kernel.org/</code></pre>
</div></div>
</li>
<li>
<p>
Fetch html and man branches back from k.org, and push four
   integration branches and the two documentation branches to
   repo.or.cz and other mirrors.
</p>
</li>
</ul></div>
<div class="paragraph"><p>Some observations to be made.</p></div>
<div class="ulist"><ul>
<li>
<p>
Each topic is tested individually, and also together with
   other topics cooking in <em>next</em>.  Until it matures, none part
   of it is merged to <em>master</em>.
</p>
</li>
<li>
<p>
A topic already in <em>next</em> can get fixes while still in
   <em>next</em>.  Such a topic will have many merges to <em>next</em> (in
   other words, "git log --first-parent next" will show many
   "Merge ai/topic to next" for the same topic.
</p>
</li>
<li>
<p>
An unobvious fix for <em>maint</em> is cooked in <em>next</em> and then
   merged to <em>master</em> to make extra sure it is Ok and then
   merged to <em>maint</em>.
</p>
</li>
<li>
<p>
Even when <em>next</em> becomes empty (in other words, all topics
   prove stable and are merged to <em>master</em> and "git diff master
   next" shows empty), it has tons of merge commits that will
   never be in <em>master</em>.
</p>
</li>
<li>
<p>
In principle, "git log --first-parent master..next" should
   show nothing but merges (in practice, there are fixup commits
   and reverts that are not merges).
</p>
</li>
<li>
<p>
Commits near the tip of a topic branch that are not in <em>next</em>
   are fair game to be discarded, replaced or rewritten.
   Commits already merged to <em>next</em> will not be.
</p>
</li>
<li>
<p>
Being in the <em>next</em> branch is not a guarantee for a topic to
   be included in the next feature release.  Being in the
   <em>master</em> branch typically is.
</p>
</li>
</ul></div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated 2012-12-31 16:06:41 PST
</div>
</div>
</body>
</html>
